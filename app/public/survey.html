<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.min.css">
    <!-- Basic innages for site-->
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

</head>

<body>

    <div class="container">

        <h2>Survey Questions</h2>
        <hr>

        <h3>
            <strong>About You</strong>
        </h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="pic" class="form-control" required>

        <hr>

        <h3>
            <!-- Update later so only one question appears on the board at a time. -->
            <strong>Question 1</strong>
        </h3>
        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q1">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 2</strong>
        </h3>
        <h4>You enjoy the great outdoors.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q2">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 3</strong>
        </h3>
        <h4>Your ideal date night is a movie on the couch.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q3">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 4</strong>
        </h3>
        <h4>You will try almost anything once.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q4">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 5</strong>
        </h3>
        <h4>If its a rainy Saturday you would spend it laying in bed all day.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q5">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 6</strong>
        </h3>
        <h4>Working out is ideal to living a healthy lifestyle.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q6">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 7</strong>
        </h3>
        <h4>You prefer to sit inside reading a book to going out with friends</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q7">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 8</strong>
        </h3>
        <h4>You enjoy taking trips overseas.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q8">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 9</strong>
        </h3>
        <h4>You prefer cats to dogs.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q9">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <h3>
            <strong>Question 10</strong>
        </h3>
        <h4>You think the early bird gets the worm.</h4>
        <p>(Please rate 1 meaning you Strongly Disagree to 5 meaning you Strongly Agree)</p>
        <select class="chosen-select" id="Q10">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <br>
        <br>
        <button type="submit" id="submit" class="btn btn-primary">Submit</button>

        <div id="modalResults" class="modal fade" role="dialog">
            <div class="modal-dialog">
      
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">X</button>
                  <h2 class="modal-title"><strong>Your new friend is:</strong></h2>
                </div>
                <div class="modal-body">
                  <h2 id="matchName"></h2>
                  <img id="matchImgage" src ="" alt="" height="350" width="300">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" id="closeModal" data-dismiss="modal">Close</button>
                </div>
              </div>
      
            </div>
      
          </div>

        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Friends List</a> |
                    <a href="https://github.com/rmccracken/friend_finder">GitHub Repo</a>
                </p>
            </div>
        </footer>

    </div>

    <script>
        let currentURL = window.location.origin;

        $("#submit").on("click",  () => {

            if (($('#name').val().trim() !== "") && ($('#pic').val().trim() !== "")) {

                let userData = {
                    name: $("#name").val(),
                    pic: $("#pic").val(),
                    scores: [$("#Q1").val(), $("#Q2").val(), $("#Q3").val(), $("#Q4").val(), $("#Q5").val(), $("#Q6").val(), $("#Q7").val(), $("#Q8").val(), $("#Q9").val(), $("#Q10").val(),]
                }

                $.post(currentURL + "/api/friends", userData,  (data) => {

                    $("#matchName").text(data.name);
                    $('#matchImgage').attr("src", data.pic);
                    $("#modalResults").modal('toggle');
                    $("#name").val("");
                    $("#pic").val("");
                });
            } else {
                $(".modal-title").text("Missing information");
                $(".modal-body").html("<h4>Please complete  before submitting</h4>");
                $("#modalResults").modal('toggle');
            }
            return false;
        });

        $('#closeModal').click( () => {
            $.get('/', (req, res) => {
                location.replace(res);
            })
        });
    </script>

</body>

</html>